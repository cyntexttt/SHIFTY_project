{"file_contents":{"style.css":{"content":"/* ØªØµÙ…ÙŠÙ… Ø£Ø³Ø§Ø³ÙŠ Ø¨Ø³ÙŠØ· */\nbody {\n  font-family: Arial, sans-serif;\n  background-color: #f4f7f6;\n  color: #333;\n  line-height: 1.6;\n  margin: 0;\n  padding: 0;\n}\n\nheader {\n  background-color: #007bff;\n  color: #ffffff;\n  padding: 1rem 0;\n  text-align: center;\n}\n\nheader h1 {\n  margin: 0;\n  font-size: 2.5rem;\n}\n\n.container {\n  max-width: 800px;\n  margin: 2rem auto;\n  padding: 1rem;\n  background-color: #ffffff;\n  border-radius: 8px;\n  box-shadow: 0 2px 5px rgba(0,0,0,0.1);\n}\n\nhr {\n  border: 0;\n  height: 1px;\n  background: #eee;\n  margin: 2rem 0;\n}\n\n/* ØªØµÙ…ÙŠÙ… Ø§Ù„ÙÙˆØ±Ù… */\n#swapForm {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n#swapForm input,\n#swapForm button {\n  padding: 12px;\n  font-size: 1rem;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n}\n\n#swapForm button {\n  background-color: #007bff;\n  color: white;\n  border: none;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n#swapForm button:disabled {\n  background-color: #a0a0a0;\n}\n\n/* ØªØµÙ…ÙŠÙ… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª */\n#loadingMessage {\n  text-align: center;\n  color: #777;\n  padding: 2rem;\n}\n\n.request-card {\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 1rem;\n  background: #fafafa;\n}\n\n.request-card h3 {\n  margin-top: 0;\n  color: #0056b3;\n}\n\n.request-card p {\n  margin: 0.5rem 0;\n}\n\n.card-actions {\n  display: flex;\n  gap: 1rem;\n  margin-top: 1rem;\n  flex-wrap: wrap; /* Ø¹Ø´Ø§Ù† Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */\n}\n\n.button {\n  padding: 10px 15px;\n  border-radius: 5px;\n  text-decoration: none;\n  color: white;\n  font-weight: bold;\n  cursor: pointer;\n  border: none;\n  font-size: 0.9rem;\n  text-align: center;\n}\n\n.whatsapp-button {\n  background-color: #25D366; /* Ù„ÙˆÙ† Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ */\n}\n\n.confirm-button {\n  background-color: #dc3545; /* Ù„ÙˆÙ† Ø£Ø­Ù…Ø± Ù„Ù„ØªØ£ÙƒÙŠØ¯ */\n}\n\n.confirm-button:disabled {\n  background-color: #a0a0a0;\n}\n","size_bytes":1859},"script.js":{"content":"// -----------------------------------------------------------------\n// ğŸ”´ğŸ”´ğŸ”´ Ø£Ù‡Ù… Ø®Ø·ÙˆØ©: Ø§Ù„ØµÙ‚ Ø§Ù„Ø±Ø§Ø¨Ø· Ø¨ØªØ§Ø¹Ùƒ Ù‡Ù†Ø§ ğŸ”´ğŸ”´ğŸ”´\n// -----------------------------------------------------------------\nconst API_URL = 'https://script.google.com/macros/s/AKfycbwipkV06uuQpzTbikM3Lmz9XOVUvYhIbM3XmADOT1al6VQzkcJJ9EfHJ7yPyBw1mVz5UA/exec'\n// -----------------------------------------------------------------\n\n\nconst form = document.getElementById('swapForm');\nconst submitButton = document.getElementById('submitButton');\nconst listContainer = document.getElementById('requestsList');\nconst loadingMessage = document.getElementById('loadingMessage');\n\n// ----- (1) Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ -----\nform.addEventListener('submit', async (e) => {\n  e.preventDefault(); // Ù†Ù…Ù†Ø¹ Ø§Ù„ÙÙˆØ±Ù… Ù…Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„\n  \n  // Ø¨Ù†Ù‚ÙÙ„ Ø§Ù„Ø²Ø±Ø§Ø± Ø¹Ø´Ø§Ù† Ù…Ø­Ø¯Ø´ ÙŠØ¯ÙˆØ³ Ù…Ø±ØªÙŠÙ†\n  submitButton.disabled = true;\n  submitButton.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù†Ø´Ø±...';\n\n  // Ø¨Ù†Ù„Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ÙÙˆØ±Ù…\n  const formData = new FormData(form);\n  const data = {\n    id: crypto.randomUUID(), // Ø¨Ù†Ø¹Ù…Ù„ ID Ø¹Ø´ÙˆØ§Ø¦ÙŠ\n    name: formData.get('name').trim(),\n    phone: formData.get('phone').trim(),\n    department: formData.get('department').trim(),\n    current_shift: formData.get('current_shift').trim(),\n    wanted_shift: formData.get('wanted_shift').trim()\n  };\n\n  // Ø¨Ù†Ø¨Ø¹Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù€ Google Apps Script\n  try {\n    const res = await fetch(API_URL, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        action: 'createNewRequest',\n        data: data\n      })\n    });\n\n    const json = await res.json();\n\n    if (json.ok) {\n      alert('ØªÙ… Ù†Ø´Ø± Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!');\n      form.reset(); // Ù†ÙØ¶ÙŠ Ø§Ù„ÙÙˆØ±Ù…\n      loadRequests(); // Ù†Ø¹ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©\n    } else {\n      throw new Error(json.error || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ');\n    }\n\n  } catch (err) {\n    alert('ÙØ´Ù„ Ù†Ø´Ø± Ø§Ù„Ø·Ù„Ø¨: ' + err.message);\n  } finally {\n    // Ø¨Ù†Ø±Ø¬Ø¹ Ø§Ù„Ø²Ø±Ø§Ø± Ù„ÙˆØ¶Ø¹Ù‡ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ\n    submitButton.disabled = false;\n    submitButton.textContent = 'Ù†Ø´Ø± Ø§Ù„Ø·Ù„Ø¨';\n  }\n});\n\n// ----- (2) Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø© -----\nasync function loadRequests() {\n  listContainer.innerHTML = ''; // Ù†ÙØ¶ÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\n  loadingMessage.style.display = 'block'; // Ù†Ø¸Ù‡Ø± Ø±Ø³Ø§Ù„Ø© \"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„\"\n\n  try {\n    // Ø¨Ù†ÙƒÙ„Ù… Ø§Ù„Ù€ API ÙˆÙ†Ù‚ÙˆÙ„Ù‡ Ø¹Ø§ÙŠØ²ÙŠÙ† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙØªÙˆØ­Ø©\n    const res = await fetch(API_URL + '?action=getOpenRequests');\n    const json = await res.json();\n\n    if (!json.ok) throw new Error(json.error);\n\n    const requests = json.data;\n\n    if (requests.length === 0) {\n      loadingMessage.textContent = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…ÙØªÙˆØ­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹. ÙƒÙ† Ø£ÙˆÙ„ ÙˆØ§Ø­Ø¯!';\n      return;\n    }\n\n    // Ø¨Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙˆØ§Ø­Ø¯ ÙˆØ§Ø­Ø¯\n    requests.forEach(req => {\n      const card = document.createElement('div');\n      card.className = 'request-card';\n      \n      // Ø¨Ù†Ø¹Ù…Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù€ HTML Ù„ÙƒÙ„ ÙƒØ§Ø±Øª\n      card.innerHTML = `\n        <h3>${req.name} (${req.department || 'Ù‚Ø³Ù… ØºÙŠØ± Ù…Ø­Ø¯Ø¯'})</h3>\n        <p><strong>Ø¹Ø§ÙŠØ² ÙŠØ¨Ø¯Ù„:</strong> ${req.current_shift}</p>\n        <p><strong>Ù…Ù‚Ø§Ø¨Ù„:</strong> ${req.wanted_shift}</p>\n        <div class=\"card-actions\">\n          <a href=\"https://wa.me/${req.phone}?text=${encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ ${req.name}ØŒ Ø£Ù†Ø§ Ø´ÙØª Ø·Ù„Ø¨Ùƒ Ø¹Ù„Ù‰ SHIFTY ÙˆØ¹Ø§ÙŠØ² Ø£Ø¨Ø¯Ù„ Ù…Ø¹Ø§Ùƒ Ø´ÙŠÙØª ${req.current_shift}`)}\" \n             target=\"_blank\" class=\"button whatsapp-button\">\n             ØªÙˆØ§ØµÙ„ ÙˆØ§ØªØ³Ø§Ø¨\n          </a>\n          <button class=\"button confirm-button\" data-id=\"${req.id}\">\n             ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ (Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø¥Ù†Ù‡Ø§Ø¡)\n          </button>\n        </div>\n      `;\n      listContainer.appendChild(card);\n    });\n\n    loadingMessage.style.display = 'none'; // Ù†Ø®ÙÙŠ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„\n\n  } catch (err) {\n    loadingMessage.textContent = 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰. ' + err.message;\n  }\n}\n\n// ----- (3) Ø¯Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ (Ù„Ù…Ø§ Ø­Ø¯ ÙŠØ¯ÙˆØ³ \"ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„\") -----\nlistContainer.addEventListener('click', async (e) => {\n  // Ø¨Ù†ØªØ£ÙƒØ¯ Ø¥Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¯Ø§Ø³ Ø¹Ù„Ù‰ Ø²Ø±Ø§Ø± \"ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„\"\n  if (e.target.classList.contains('confirm-button')) {\n    \n    if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ Ø£ØªÙ…Ù…Øª Ù‡Ø°Ø§ Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨.')) {\n      return; // Ù„Ùˆ Ø¯Ø§Ø³ \"Cancel\"\n    }\n\n    const button = e.target;\n    const requestId = button.dataset.id;\n    button.disabled = true;\n    button.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø°Ù...';\n\n    try {\n      // Ø¨Ù†Ø¨Ø¹Øª Ù„Ù„Ù€ API Ù†Ù‚ÙˆÙ„Ù‡ Ø§Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ø¯Ù‡\n      const res = await fetch(API_URL, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          action: 'completeRequest',\n          data: { id: requestId, matchedBy: 'user' }\n        })\n      });\n      \n      const json = await res.json();\n      if (json.ok) {\n        alert('ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©.');\n        loadRequests(); // Ù†Ø¹ÙŠØ¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (Ø¹Ø´Ø§Ù† Ø§Ù„Ø·Ù„Ø¨ ÙŠØ®ØªÙÙŠ)\n      } else {\n        throw new Error(json.error || 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨');\n      }\n\n    } catch (err) {\n      alert('ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø·Ù„Ø¨: ' + err.message);\n      button.disabled = false;\n      button.textContent = 'ØªÙ… Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ (Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø¥Ù†Ù‡Ø§Ø¡)';\n    }\n  }\n});\n\n\n// ----- (4) Ø£ÙˆÙ„ Ù…Ø§ Ø§Ù„ØµÙØ­Ø© ØªÙØªØ­ØŒ Ø­Ù…Ù‘Ù„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª -----\nloadRequests();\n\n","size_bytes":5840}},"version":2}